{"ast":null,"code":"import actiontypes from '../actiontypes';\nconst initState = {\n  cart: [],\n  totalQuantity: 0,\n  totalAmount: 0\n};\n\nconst cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case actiontypes().cart.add:\n      {\n        const itemRef = state.cart.find(item => item._id === action.payload._id);\n        let cartItem = { ...action.payload,\n          quantity: 1\n        };\n        itemRef ? itemRef.quantity += 1 : state.cart = [...state.cart, cartItem];\n        return { ...state,\n          totalQuantity: getTotalQuantity(state.cart),\n          totalAmount: getTotalAmount(state.cart)\n        };\n      }\n\n    case actiontypes().cart.decrement:\n      {\n        const itemRef = state.cart.find(item => item._id === action.payload);\n        itemRef.quantity === 1 ? state.cart = state.cart.filter(item => item._id !== action.payload) : itemRef.quantity -= 1;\n        return { ...state,\n          totalQuantity: getTotalQuantity(state.cart),\n          totalAmount: getTotalAmount(state.cart)\n        };\n      }\n\n    case actiontypes().cart.removeOne:\n      {\n        state.cart = state.cart.filter(item => item._id !== action.payload);\n        return { ...state,\n          totalQuantity: getTotalQuantity(state.cart),\n          totalAmount: getTotalAmount(state.cart)\n        };\n      }\n\n    case actiontypes().cart.clearCart:\n      {\n        return { ...state,\n          cart: [0],\n          totalAmount: 0,\n          totalQuantity: 0\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;\n\nconst getTotalQuantity = cart => {\n  let quantity = 0;\n  cart.forEach(item => {\n    quantity += item.quantity;\n  });\n  return quantity;\n};\n\nconst getTotalAmount = cart => {\n  let total = 0;\n  cart.forEach(item => {\n    total += item.price * item.quantity;\n  });\n  return total;\n};","map":{"version":3,"names":["actiontypes","initState","cart","totalQuantity","totalAmount","cartReducer","state","action","type","add","itemRef","find","item","_id","payload","cartItem","quantity","getTotalQuantity","getTotalAmount","decrement","filter","removeOne","clearCart","forEach","total","price"],"sources":["C:/Users/anasz/OneDrive/Skrivbord/FEU21/java-script/script-3/VS/uppgiften/GruppC/ecommerce/src/store/reducers/cartReducer.js"],"sourcesContent":["import actiontypes from '../actiontypes'\r\nconst initState = {\r\n    cart:[],\r\n    totalQuantity:0,\r\n    totalAmount:0\r\n}\r\n\r\n\r\n\r\nconst cartReducer = (state = initState,action ) => {\r\n    switch (action.type){\r\n        case actiontypes().cart.add: {\r\n\r\n            const itemRef = state.cart.find(item => item._id === action.payload._id)\r\n\r\n            let cartItem = {\r\n                ...action.payload,\r\n                quantity: 1\r\n            }\r\n\r\n            itemRef            \r\n            ? itemRef.quantity += 1\r\n            : state.cart = [...state.cart, cartItem]\r\n\r\n            return {\r\n                ...state,\r\n                totalQuantity: getTotalQuantity(state.cart),\r\n                totalAmount: getTotalAmount(state.cart)\r\n                \r\n            }\r\n\r\n        }\r\n\r\n        case actiontypes().cart.decrement:{\r\n            const itemRef = state.cart.find(item => item._id === action.payload)\r\n\r\n            itemRef.quantity === 1\r\n            ? state.cart = state.cart.filter(item => item._id !== action.payload)\r\n            : itemRef.quantity -= 1\r\n\r\n            return {\r\n                ...state,\r\n                totalQuantity: getTotalQuantity(state.cart),\r\n                totalAmount: getTotalAmount(state.cart)\r\n            }\r\n        }\r\n\r\n\r\n        case actiontypes().cart.removeOne: {\r\n            state.cart = state.cart.filter(item => item._id !== action.payload)\r\n\r\n            return {\r\n                ...state,\r\n                totalQuantity: getTotalQuantity(state.cart),\r\n                totalAmount: getTotalAmount(state.cart)\r\n            }\r\n        }\r\n\r\n        case actiontypes().cart.clearCart: {\r\n            return {\r\n                ...state,\r\n                cart: [0],\r\n                totalAmount: 0,\r\n                totalQuantity: 0\r\n            }\r\n        }\r\n        default:\r\n            return state \r\n   }\r\n}\r\n\r\n\r\nexport default  cartReducer\r\n\r\n        const getTotalQuantity = cart => {\r\n            let quantity = 0\r\n\r\n            cart.forEach(item => {\r\n                quantity += item.quantity\r\n            })\r\n\r\n            return quantity\r\n        }\r\n\r\n        const getTotalAmount = cart => {\r\n            let total = 0;\r\n\r\n            cart.forEach(item => {\r\n                total += item.price * item.quantity\r\n            })\r\n\r\n            return total\r\n        }"],"mappings":"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"},"metadata":{},"sourceType":"module"}